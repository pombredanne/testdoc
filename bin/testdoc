#!/usr/bin/python

import sys
import testdoc
from testdoc import documenter, formatter, reflect


def usage():
    return "Usage: testdoc <fully-qualified module name>"


def main():
    if len(sys.argv) != 2:
        print usage()
        sys.exit(2)
    try:
        module = reflect.namedAny(sys.argv[1])
    except:
        print usage()
        raise
    format = formatter.WikiFormatter(sys.stdout)
    doc = documenter.Documenter(format)
    testdoc.find_tests(doc, module)


if __name__ == '__main__':
    main()
